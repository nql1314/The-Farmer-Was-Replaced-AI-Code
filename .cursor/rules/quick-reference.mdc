---
alwaysApply: true
---
# TFWR å¿«é€Ÿå‚è€ƒ

## ä½œç‰©æ•°æ®

### ç”Ÿé•¿æ—¶é—´ï¼ˆå¹³å‡ï¼‰
```python
Entities.Grass:      0.5 ç§’
Entities.Dinosaur:   0.2 ç§’
Entities.Cactus:     1 ç§’
Entities.Bush:       4 ç§’
Entities.Pumpkin:    2 ç§’
Entities.Sunflower:  5 ç§’
Entities.Carrot:     6 ç§’
Entities.Tree:       7 ç§’
```

### ç§æ¤æˆæœ¬
```python
Entities.Grass:      å…è´¹
Entities.Bush:       å…è´¹
Entities.Tree:       å…è´¹
Entities.Carrot:     1 æœ¨æ + 5 å¹²è‰
Entities.Pumpkin:    1 èƒ¡èåœ
Entities.Sunflower:  25 å—ç“œ
Entities.Cactus:     5 å—ç“œ

# ä½¿ç”¨ get_cost() è·å–ï¼š
cost = get_cost(Entities.Carrot)
# è¿”å› {Items.Wood: 1, Items.Hay: 5}
```

### æ”¶è·äº§é‡
```python
# åŸºç¡€äº§é‡ï¼ˆæ— ç‰¹æ®Šæœºåˆ¶ï¼‰
Entities.Grass:      1 å¹²è‰
Entities.Bush:       1 æœ¨æ
Entities.Tree:       5 æœ¨æ
Entities.Carrot:     1 èƒ¡èåœ
Entities.Pumpkin:    1 å—ç“œï¼ˆå•ä¸ªï¼‰
Entities.Sunflower:  1 èƒ½é‡ï¼ˆåŸºç¡€ï¼‰
Entities.Cactus:     1 ä»™äººæŒï¼ˆå•ä¸ªï¼‰

# ç‰¹æ®Šæœºåˆ¶äº§é‡ï¼š
# å—ç“œï¼šnÃ—n åˆå¹¶ = nÂ³ (n<6) æˆ– nÂ²Ã—6 (nâ‰¥6)
# ä»™äººæŒï¼šæ’åºæ”¶å‰² n ä¸ª = nÂ²
# å‘æ—¥è‘µï¼šæœ€å¤§èŠ±ç“£+10æ ªä»¥ä¸Š = 5Ã— èƒ½é‡
```

### ç§æ¤è¦æ±‚
```python
# éœ€è¦åœŸå£¤ï¼ˆGrounds.Soilï¼‰ï¼š
Entities.Carrot
Entities.Pumpkin
Entities.Sunflower
Entities.Cactus

# å¯åœ¨è‰åœ°ï¼ˆGrounds.Grasslandï¼‰ï¼š
Entities.Grass
Entities.Bush
Entities.Tree
```

## æ“ä½œæˆæœ¬ï¼ˆTickï¼‰

### 0 Tickï¼ˆå®Œå…¨å…è´¹ï¼‰
```python
get_tick_count()
get_time()
quick_print()
```

### 1 Tickï¼ˆæŸ¥è¯¢æ“ä½œï¼‰
```python
# æ‰€æœ‰ can_* å‡½æ•°
can_harvest()
can_move(direction)

# æ‰€æœ‰ get_* å‡½æ•°ï¼ˆé™¤äº† get_tick_count å’Œ get_timeï¼‰
get_entity_type()
get_ground_type()
get_pos_x()
get_pos_y()
get_world_size()
get_water()
get_companion()

# å…¶ä»–æŸ¥è¯¢
num_items(item)
num_unlocked(unlock)
measure()
measure(direction)
```

### 200 Tickï¼ˆæ‰§è¡Œæ“ä½œï¼‰
```python
move(direction)
harvest()
plant(entity)
till()
swap(direction)
use_item(item)
trade(item, amount)
unlock(unlock_type)
```

### ç‰¹æ®Šæˆæœ¬
```python
# spawn_drone()ï¼šçº¦ 200 ticks
# do_a_flip()ï¼šå¿«è¿›æ—¶é—´ï¼ˆæˆæœ¬å¯å˜ï¼‰
# print()ï¼šæ˜¾ç¤ºæ–‡æœ¬ï¼ˆæš‚åœæ‰§è¡Œï¼‰
```

## è§£é”é¡ºåºå»ºè®®

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€ç¼–ç¨‹ï¼ˆå¿…éœ€ï¼‰
```python
1. Unlocks.Operators      # è¿ç®—ç¬¦
2. Unlocks.Variables      # å˜é‡
3. Unlocks.Loops          # å¾ªç¯
4. Unlocks.Functions      # å‡½æ•°
5. Unlocks.Senses         # æ„Ÿå®˜ï¼ˆè·å–ä¿¡æ¯ï¼‰
```

### ç¬¬äºŒé˜¶æ®µï¼šèµ„æºæ‰©å¼ 
```python
6. Unlocks.Expand         # æ‰©å±•å†œåœºï¼ˆ3Ã—3ï¼‰
7. Unlocks.Speed          # é€Ÿåº¦å‡çº§
8. Unlocks.Lists          # åˆ—è¡¨
9. Unlocks.Expand (å†æ¬¡)  # ç»§ç»­æ‰©å±•ï¼ˆä¼˜å…ˆåˆ° 6Ã—6ï¼‰
```

### ç¬¬ä¸‰é˜¶æ®µï¼šé«˜çº§ä½œç‰©
```python
10. Unlocks.Carrots       # èƒ¡èåœ
11. Unlocks.Pumpkins      # å—ç“œï¼ˆé«˜äº§ï¼‰
12. Unlocks.Sunflowers    # å‘æ—¥è‘µï¼ˆèƒ½é‡åŠ é€Ÿï¼‰
13. Unlocks.Watering      # æµ‡æ°´ç³»ç»Ÿ
```

### ç¬¬å››é˜¶æ®µï¼šä¼˜åŒ–å·¥å…·
```python
14. Unlocks.Dictionaries  # å­—å…¸
15. Unlocks.Speed (å¤šæ¬¡)  # ç»§ç»­å‡çº§é€Ÿåº¦
16. Unlocks.Expand (å¤šæ¬¡) # æ‰©å±•åˆ° 10Ã—10
17. Unlocks.Trees         # æ ‘ï¼ˆå¤§é‡æœ¨æï¼‰
```

### ç¬¬äº”é˜¶æ®µï¼šé«˜çº§ç‰¹æ€§
```python
18. Unlocks.Fertilizer    # è‚¥æ–™ï¼ˆåŠ é€Ÿ+å¥‡å¼‚ç‰©è´¨ï¼‰
19. Unlocks.Mazes         # è¿·å®«ï¼ˆè·å–é‡‘å¸ï¼‰
20. Unlocks.Cactus        # ä»™äººæŒï¼ˆéœ€è¦æ’åºï¼‰
21. Unlocks.Polyculture   # æ··åˆç§æ¤ï¼ˆå¢äº§ï¼‰
```

### ç¬¬å…­é˜¶æ®µï¼šç»ˆæå·¥å…·
```python
22. Unlocks.Megafarm      # å¤šæ— äººæœº
23. Unlocks.Debug         # è°ƒè¯•å·¥å…·
24. Unlocks.Debug_2       # é«˜çº§è°ƒè¯•
25. Unlocks.Dinosaurs     # æé¾™ï¼ˆè·å–éª¨å¤´ï¼‰
```

### æŒç»­å‡çº§
```python
# è¿™äº›åº”è¯¥æŒç»­å‡çº§ï¼š
- Unlocks.Speed           # æ¯çº§ç¿»å€é€Ÿåº¦
- Unlocks.Expand          # å¢åŠ å†œåœºé¢ç§¯
- Unlocks.Watering        # ç¿»å€æ°´èµ„æºç”Ÿæˆ
- Unlocks.Fertilizer      # ç¿»å€è‚¥æ–™ç”Ÿæˆ
- Unlocks.Mazes           # ç¿»å€è¿·å®«äº§å‡º
```

## èµ„æºè·å–è·¯å¾„

### å¹²è‰ï¼ˆHayï¼‰
```python
# æ¥æºï¼šè‰
# ç­–ç•¥ï¼šè®©è‰è‡ªç„¶ç”Ÿé•¿ï¼Œç„¶åæ”¶å‰²
# ç”¨é€”ï¼šè§£é”åŸºç¡€åŠŸèƒ½ã€ç§æ¤èƒ¡èåœ

def farm_hay():
    for y in range(get_world_size()):
        for x in range(get_world_size()):
            if can_harvest():
                harvest()
            # ç§»åŠ¨...
```

### æœ¨æï¼ˆWoodï¼‰
```python
# æ¥æºï¼šçŒæœ¨ï¼ˆ1ä¸ªï¼‰ã€æ ‘ï¼ˆ5ä¸ªï¼‰
# æ—©æœŸï¼šç§çŒæœ¨ï¼ˆ4ç§’æˆç†Ÿï¼‰
# åæœŸï¼šç§æ ‘ï¼ˆ7ç§’æˆç†Ÿï¼Œä½†äº§é‡5å€ï¼‰
# ç”¨é€”ï¼šç§æ¤èƒ¡èåœ

def farm_wood_early():
    # ç§æ¤çŒæœ¨
    plant(Entities.Bush)
    while not can_harvest():
        pass
    harvest()

def farm_wood_late():
    # ç§æ¤æ ‘ï¼ˆæ£‹ç›˜æ ¼é¿å…å‡é€Ÿï¼‰
    if (get_pos_x() + get_pos_y()) % 2 == 0:
        plant(Entities.Tree)
```

### èƒ¡èåœï¼ˆCarrotï¼‰
```python
# æ¥æºï¼šç§æ¤èƒ¡èåœ
# æˆæœ¬ï¼š1 æœ¨æ + 5 å¹²è‰
# ç”¨é€”ï¼šç§æ¤å—ç“œ

def farm_carrots():
    if get_ground_type() != Grounds.Soil:
        till()
    plant(Entities.Carrot)
    while not can_harvest():
        pass
    harvest()
```

### å—ç“œï¼ˆPumpkinï¼‰
```python
# æ¥æºï¼šç§æ¤å—ç“œï¼ˆåˆå¹¶æœºåˆ¶ï¼‰
# æˆæœ¬ï¼š1 èƒ¡èåœ
# ç­–ç•¥ï¼šç§æ¤ 6Ã—6 æˆ–æ›´å¤§ï¼Œç­‰å¾…åˆå¹¶
# ç”¨é€”ï¼šç§æ¤å‘æ—¥è‘µã€ä»™äººæŒ

def farm_pumpkins():
    size = 6
    # ç§æ¤ 6Ã—6 ç½‘æ ¼
    # ç­‰å¾…å…¨éƒ¨æˆç†Ÿ
    # æ”¶å‰²ä»»æ„ä¸€ä¸ªï¼ˆè·å¾— 216 ä¸ªå—ç“œï¼‰
```

### èƒ½é‡ï¼ˆPowerï¼‰
```python
# æ¥æºï¼šå‘æ—¥è‘µ
# æˆæœ¬ï¼š25 å—ç“œ
# ç­–ç•¥ï¼šç§æ¤ 10+ æ ªï¼Œæ”¶å‰²æœ€å¤§èŠ±ç“£ï¼ˆ5Ã— å¥–åŠ±ï¼‰
# æ•ˆæœï¼šæ‰€æœ‰æ“ä½œ 2Ã— é€Ÿåº¦

def farm_power():
    # ç§æ¤è‡³å°‘ 10 æ ªå‘æ—¥è‘µ
    # æ‰¾åˆ°æœ€å¤§èŠ±ç“£çš„é‚£æ ª
    # æ”¶å‰²è·å¾— 5Ã— èƒ½é‡
```

### ä»™äººæŒï¼ˆCactus Itemï¼‰
```python
# æ¥æºï¼šä»™äººæŒï¼ˆæ’åºæœºåˆ¶ï¼‰
# æˆæœ¬ï¼š5 å—ç“œ
# ç­–ç•¥ï¼šæ’åºåæ”¶å‰²ï¼ˆn ä¸ª = nÂ² äº§é‡ï¼‰
# ç”¨é€”ï¼šæé¾™å¸½ï¼ˆè´­ä¹°è‹¹æœï¼‰

def farm_cactus():
    # ç§æ¤ä»™äººæŒç½‘æ ¼
    # æ’åºä»™äººæŒ
    # æ”¶å‰²è·å¾— nÂ² äº§é‡
```

### å¥‡å¼‚ç‰©è´¨ï¼ˆWeird_Substanceï¼‰
```python
# æ¥æº1ï¼šæ–½è‚¥çš„æ¤ç‰©ï¼ˆæ”¶è·æ—¶ 50% äº§é‡è½¬åŒ–ï¼‰
# æ¥æº2ï¼šæ”¶è·æ„ŸæŸ“çš„æ¤ç‰©
# ç”¨é€”ï¼šç”Ÿæˆè¿·å®«ã€åˆ‡æ¢æ„ŸæŸ“çŠ¶æ€

def get_weird_substance():
    # ç§æ¤ä½œç‰©
    # ä½¿ç”¨è‚¥æ–™ï¼ˆæ„ŸæŸ“ï¼‰
    # æ”¶è·ï¼ˆä¸€åŠäº§é‡å˜å¥‡å¼‚ç‰©è´¨ï¼‰
```

### é‡‘å¸ï¼ˆGoldï¼‰
```python
# æ¥æºï¼šè¿·å®«å®è—
# ç­–ç•¥ï¼šç”Ÿæˆè¿·å®«ï¼Œå¯¼èˆªåˆ°å®è—ï¼Œæ”¶è·
# äº§é‡ï¼šè¿·å®«é¢ç§¯ï¼ˆnÃ—n = nÂ² é‡‘å¸ï¼‰

def farm_gold():
    plant(Entities.Bush)
    substance = get_world_size() * (2 ** (num_unlocked(Unlocks.Mazes) - 1))
    use_item(Items.Weird_Substance, substance)
    # å¯¼èˆªåˆ°å®è—
    # harvest()
```

### éª¨å¤´ï¼ˆBoneï¼‰
```python
# æ¥æºï¼šæé¾™å¸½
# ç­–ç•¥ï¼šè£…å¤‡æé¾™å¸½ï¼Œè¦†ç›–å†œåœºï¼Œå¸ä¸‹å¸½å­
# äº§é‡ï¼šå°¾å·´é•¿åº¦Â²

def farm_bones():
    change_hat(Hats.Dinosaur_Hat)
    # éå†æ•´ä¸ªå†œåœºï¼ˆå“ˆå¯†å°”é¡¿è·¯å¾„ï¼‰
    change_hat(Hats.None)  # è·å¾— (lengthÂ²) éª¨å¤´
```

## å¸¸ç”¨å¸¸é‡

### æ–¹å‘
```python
North  # å‘ä¸Šï¼ˆy+1ï¼‰
South  # å‘ä¸‹ï¼ˆy-1ï¼‰
East   # å‘å³ï¼ˆx+1ï¼‰
West   # å‘å·¦ï¼ˆx-1ï¼‰

# ç›¸åæ–¹å‘
def opposite(direction):
    if direction == North:
        return South
    if direction == South:
        return North
    if direction == East:
        return West
    if direction == West:
        return East
```

### å®ä½“ç±»å‹
```python
# æ£€æŸ¥å®ä½“
Entities.Grass
Entities.Bush
Entities.Tree
Entities.Carrot
Entities.Pumpkin
Entities.Dead_Pumpkin  # æ¯èå—ç“œ
Entities.Sunflower
Entities.Cactus
Entities.Hedge         # è¿·å®«å¢™å£
Entities.Treasure      # è¿·å®«å®è—
Entities.Apple         # æé¾™å¸½è‹¹æœ
Entities.Dinosaur      # æé¾™å°¾å·´

# ç©ºä½ç½®
None  # get_entity_type() åœ¨ç©ºåœ°è¿”å› None
```

### åœ°é¢ç±»å‹
```python
Grounds.Grassland  # è‰åœ°
Grounds.Soil       # åœŸå£¤ï¼ˆè€•è¿‡çš„åœ°ï¼‰
```

### ç‰©å“ç±»å‹
```python
Items.Hay
Items.Wood
Items.Carrot
Items.Pumpkin
Items.Cactus
Items.Power
Items.Water
Items.Fertilizer
Items.Weird_Substance
Items.Gold
Items.Bone
```

### å¸½å­
```python
Hats.None           # æ— å¸½å­ï¼ˆé»˜è®¤ï¼‰
Hats.Dinosaur_Hat   # æé¾™å¸½
```

## å®ç”¨å‡½æ•°æ¨¡æ¿

### è›‡å½¢éå†
```python
def traverse_snake(action):
    size = get_world_size()
    for y in range(size):
        for x in range(size):
            action()
            if x < size - 1:
                move(East if y % 2 == 0 else West)
        if y < size - 1:
            move(North)
```

### å¯¼èˆªåˆ°ä½ç½®
```python
def goto(target_x, target_y):
    # ç®€å•å¯¼èˆªï¼ˆå‡è®¾å†œåœºæ˜¯ç¯å½¢çš„ï¼‰
    while get_pos_x() != target_x:
        move(East if get_pos_x() < target_x else West)
    
    while get_pos_y() != target_y:
        move(North if get_pos_y() < target_y else South)
```

### ç­‰å¾…å¤šä¸ªæ¡ä»¶
```python
def wait_until(condition_func):
    while not condition_func():
        do_a_flip()  # å¿«è¿›æ—¶é—´

# ä½¿ç”¨ç¤ºä¾‹
wait_until(can_harvest)
```

### æ‰¹é‡æ“ä½œ
```python
def apply_to_all(func):
    size = get_world_size()
    for y in range(size):
        for x in range(size):
            func()
            if x < size - 1:
                move(East)
        if y < size - 1:
            move(North)
            for _ in range(size - 1):
                move(West)

# ä½¿ç”¨ç¤ºä¾‹
apply_to_all(harvest)
```

### èµ„æºæ£€æŸ¥
```python
def has_resources(cost_dict):
    for item in cost_dict:
        if num_items(item) < cost_dict[item]:
            return False
    return True

# ä½¿ç”¨ç¤ºä¾‹
if has_resources(get_cost(Entities.Carrot)):
    plant(Entities.Carrot)
```

## æ€§èƒ½ä¼˜åŒ–æ¸…å•

### âœ… å¿…åšä¼˜åŒ–
1. **ç¼“å­˜ get_world_size()**
   ```python
   size = get_world_size()  # ç¼“å­˜ï¼Œä¸è¦æ¯æ¬¡å¾ªç¯éƒ½è°ƒç”¨
   ```

2. **ä½¿ç”¨è›‡å½¢éå†**ï¼ˆå‡å°‘ç§»åŠ¨æ¬¡æ•°ï¼‰
   ```python
   # è›‡å½¢ï¼šNÂ²-1 æ¬¡ç§»åŠ¨
   # å¾€è¿”ï¼šNÂ²Ã—2 æ¬¡ç§»åŠ¨
   ```

3. **å…ˆæ£€æŸ¥åæ‰§è¡Œ**
   ```python
   if can_harvest():  # 1 tick
       harvest()      # 200 ticks
   ```

4. **æ‰¹é‡å¤„ç†**
   ```python
   # åœ¨åŒä¸€ä½ç½®å®Œæˆæ‰€æœ‰æ“ä½œï¼Œå‡å°‘ç§»åŠ¨
   ```

5. **æ—©æœŸè·å¾—èƒ½é‡**
   ```python
   # èƒ½é‡ä½¿æ‰€æœ‰æ“ä½œ 2Ã— é€Ÿåº¦
   ```

### ğŸ¯ è¿›é˜¶ä¼˜åŒ–
1. **ä½¿ç”¨å¤šæ— äººæœº**ï¼ˆMegafarmï¼‰
2. **ç»´æŒé«˜å«æ°´é‡**ï¼ˆ5Ã— ç”Ÿé•¿é€Ÿåº¦ï¼‰
3. **ä½¿ç”¨è‚¥æ–™**ï¼ˆ-2ç§’ç”Ÿé•¿æ—¶é—´ï¼‰
4. **æ··åˆç§æ¤**ï¼ˆ5Ã—+ äº§é‡ï¼‰
5. **ä¼˜åŒ–è·¯å¾„ç®—æ³•**

### ğŸ“Š æ€§èƒ½ç›®æ ‡
```python
# æ—©æœŸï¼š< 100,000 ticks
# ä¸­æœŸï¼š< 50,000 ticks
# åæœŸï¼š< 10,000 ticks
# æ’è¡Œæ¦œï¼šå°½å¯èƒ½å°‘
```

## å¸¸è§é”™è¯¯é€ŸæŸ¥

| é”™è¯¯ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| `harvest()` å¤±è´¥ | æ¤ç‰©æœªæˆç†Ÿ | å…ˆç”¨ `can_harvest()` æ£€æŸ¥ |
| `plant()` å¤±è´¥ | åœ°é¢ä¸æ˜¯åœŸå£¤ | å…ˆç”¨ `till()` ç¿»åœŸ |
| `move()` è¿”å› False | é‡åˆ°å¢™å£/å°¾å·´ | ç”¨ `can_move()` æ£€æŸ¥ |
| å—ç“œä¸åˆå¹¶ | æœ‰æ¯èå—ç“œ | æ›¿æ¢æ¯èå—ç“œ |
| ä»™äººæŒä¸é€’å½’æ”¶å‰² | æœªæ’åº | ä½¿ç”¨æ’åºç®—æ³• |
| å‘æ—¥è‘µèƒ½é‡ä½ | ä¸æ˜¯æœ€å¤§èŠ±ç“£/å°‘äº10æ ª | æ£€æŸ¥æ¡ä»¶ |
| æ— äººæœºå˜é‡ä¸åŒæ­¥ | æ— å…±äº«å†…å­˜ | ä½¿ç”¨è¿”å›å€¼ä¼ é€’æ•°æ® |
| è¿·å®«æ‰¾ä¸åˆ°å®è— | ç®—æ³•é—®é¢˜ | ä½¿ç”¨ BFS/DFS |

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•çŸ¥é“å½“å‰è§£é”äº†ä»€ä¹ˆï¼Ÿ
```python
if num_unlocked(Unlocks.Carrots) > 0:
    # èƒ¡èåœå·²è§£é”
    pass
```

### Q: å¦‚ä½•è‡ªåŠ¨è§£é”ï¼Ÿ
```python
cost = get_cost(Unlocks.Speed)
if cost and has_resources(cost):
    unlock(Unlocks.Speed)
```

### Q: å¦‚ä½•å¤„ç†æ¯èå—ç“œï¼Ÿ
```python
if get_entity_type() == Entities.Dead_Pumpkin:
    plant(Entities.Pumpkin)  # è‡ªåŠ¨æ›¿æ¢
```

### Q: å¦‚ä½•é¿å…æ ‘ç”Ÿé•¿å‡é€Ÿï¼Ÿ
```python
# ä½¿ç”¨æ£‹ç›˜æ ¼ç§æ¤
if (get_pos_x() + get_pos_y()) % 2 == 0:
    plant(Entities.Tree)
```

### Q: å¦‚ä½•æµ‹é‡æ€§èƒ½ï¼Ÿ
```python
start = get_tick_count()
my_function()
print("Ticks:", get_tick_count() - start)
```

### Q: å¦‚ä½•åœ¨ç­‰å¾…æ—¶ä¸æµªè´¹ tickï¼Ÿ
```python
# ä½¿ç”¨ do_a_flip() å¿«è¿›
while not can_harvest():
    do_a_flip()

# æˆ–è€…å»å¤„ç†å…¶ä»–äº‹æƒ…
while not can_harvest():
    # å»å…¶ä»–ä½ç½®å·¥ä½œ
    pass
```
